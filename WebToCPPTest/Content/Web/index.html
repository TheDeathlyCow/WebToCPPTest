<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Unreal Engine Asset Browser</title>
</head>
<body>
<h1>Available Assets</h1>
<h2 id="lastSelected"></h2>
<ul id="assetList">
    <!-- Items will be populated here -->
</ul>

<script>
    function insertAssets(assets) {
        const list = document.getElementById('assetList');

        // clear items first 
        while (list.firstChild) {
            list.removeChild(list.firstChild);
        }
        
        assets.forEach(assetName => {
            const li = document.createElement('li');
            li.textContent = assetName; 
            li.onclick = () => {
                onAssetSelected(assetName)
            };
            list.appendChild(li);
        });
    }
    
    // called from C++ when it receives a selected asset name
    function setSelectedAsset(assetName) {
        const lastSelected = document.getElementById('lastSelected');
        lastSelected.textContent = `Last Selected: ${assetName}`;
    }
    
    function onAssetSelected(assetName) {
        // JS side of the hack: update the query params with some data which reloads the page, and invokes the 
        // WebBrowser::OnUrlChanged event in C++ 
        window.location.search = `?assetName=${assetName}`;
    }
</script>
</body>
</html>